<!DOCTYPE html>
<html manifest="cache.appcache">
<head>
<meta http-equiv="Content-Type" content="text/html; ISO-8859-1"/>
<meta charset="ISO-8859-1"/>
<script type="application/javascript" src="basicjs.js"></script>
<script type="application/javascript" src="basic.js"></script>
<link rel="stylesheet" type="text/css" href="basic.css"/>
<style type="text/css">
body, html {
  height: 100%;
  width: 100%;
  margin: 0px;
}
.credits {
	margin:0px;width:90%;text-align:right;padding:5px 0px;color:#ccc;font-size:11px;top:30px;float:bottom;
}
.credits a {
	color:#ccc; font-size:12px;border:0px;text-decoration:none;
}
</style>
<title>Xumb: Home</title>
</head>
<body>
	<div align="center" style="height: 100%; margin: 0px;">
	<h2><a href="http://www.frofens.org/xumb/demo/">Xumb v0.7</a></h2>
	<div align="right">User: None | <a href='http://www.frofens.org/xumb/demo/login'>Login</a> | <a href='http://www.frofens.org/xumb/demo/user/new_user'>Sign up</a></div>

		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
		<!--script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js"></script-->
		
			<script type="text/javascript">
		    function updateMapPosition(position){
		        var lat = position.coords.latitude; //-22.9121068 - maracanã
		        var lng = position.coords.longitude; // -43.23015520000001 - maracanã
				 alert ("Lat:" + lat + " Long:" + lng);
		        // Centraliza o mapa na localização do usuário
		        var point = new google.maps.LatLng(lat, lng);
		        map.setCenter(point);
		    }

		    function geoLocError(errmsg) {
		    	alert('Can\'t get location: '+errmsg.message);
		    }

var map;var iw=new google.maps.InfoWindow();var lat_longs=new Array();var markers=new Array();var markerCluster;var markers_owned=new Array();var markers_not_owned=new Array();var cat_1_markers=new Array();var cat_2_markers=new Array();var cat_3_markers=new Array();var cat_4_markers=new Array();function initialize(){var myLatlng=new google.maps.LatLng(-22.9035,-43.2096);var myOptions={zoom:13,center:myLatlng,mapTypeId:google.maps.MapTypeId.ROADMAP}
map=new google.maps.Map(document.getElementById("map_canvas"),myOptions);var myLatlng=new google.maps.LatLng(-22.918240,-43.215923);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/tree.png"};marker_6=createMarker(markerOptions);marker_6.set("content","Rua Doutor Satamini, 214");google.maps.event.addListener(marker_6,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,6);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.899582,-43.233864);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/car.png"};marker_8=createMarker(markerOptions);marker_8.set("content","São Cristóvão, R. Pirolito");google.maps.event.addListener(marker_8,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,8);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.903217,-43.200214);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/power.png"};marker_9=createMarker(markerOptions);marker_9.set("content","Rua do Pinto, 34");google.maps.event.addListener(marker_9,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,9);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.916025,-43.241413);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/tree.png"};marker_10=createMarker(markerOptions);marker_10.set("content","Rua Gonzaga Bastos, 412");google.maps.event.addListener(marker_10,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,10);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.903217,-43.213608);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/construction.png"};marker_11=createMarker(markerOptions);marker_11.set("content","Rua Gotemburgo, 2");google.maps.event.addListener(marker_11,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,11);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.909622,-43.243347);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/power.png"};marker_12=createMarker(markerOptions);marker_12.set("content","test");google.maps.event.addListener(marker_12,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,12);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.928200,-43.191547);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/car.png"};marker_13=createMarker(markerOptions);marker_13.set("content","Rua Almirante Alexandrino, 1761");google.maps.event.addListener(marker_13,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,13);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.925037,-43.241589);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/power.png"};marker_14=createMarker(markerOptions);marker_14.set("content","Tijuca, R. Dois");google.maps.event.addListener(marker_14,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,14);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.899738,-43.254375);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/power.png"};marker_15=createMarker(markerOptions);marker_15.set("content","Teste");google.maps.event.addListener(marker_15,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,15);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.925512,-43.223736);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/construction.png"};marker_16=createMarker(markerOptions);marker_16.set("content","Rua Rego Lopes, 56");google.maps.event.addListener(marker_16,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,16);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.929939,-43.254292);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/construction.png"};marker_20=createMarker(markerOptions);marker_20.set("content","Rua Leopoldo, 616");google.maps.event.addListener(marker_20,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,20);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.888512,-43.250340);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/construction.png"};marker_21=createMarker(markerOptions);marker_21.set("content","Avenida Dom Helder Câmara, 1321");google.maps.event.addListener(marker_21,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,21);iw.open(map,this);});var myLatlng=new google.maps.LatLng(-22.930256,-43.230083);var markerOptions={map:map,position:myLatlng,icon:"http://www.frofens.org/xumb/demo/icons/construction.png"};marker_22=createMarker(markerOptions);marker_22.set("content","Testing New Flow");google.maps.event.addListener(marker_22,"click",function(event){iw.setContent("<div class=\"iw_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>");load_infowindow_content(iw,22);iw.open(map,this);});/*var clusterOptions={gridSize:40,minimumClusterSize:2};markerCluster=new MarkerClusterer(map,markers,clusterOptions);*/cat_4_markers.push(marker_6);markers_not_owned.push(marker_6);cat_2_markers.push(marker_8);markers_not_owned.push(marker_8);cat_3_markers.push(marker_9);markers_not_owned.push(marker_9);cat_4_markers.push(marker_10);markers_not_owned.push(marker_10);cat_1_markers.push(marker_11);markers_not_owned.push(marker_11);cat_3_markers.push(marker_12);markers_not_owned.push(marker_12);cat_2_markers.push(marker_13);markers_not_owned.push(marker_13);cat_3_markers.push(marker_14);markers_not_owned.push(marker_14);cat_3_markers.push(marker_15);markers_not_owned.push(marker_15);cat_1_markers.push(marker_16);markers_not_owned.push(marker_16);cat_1_markers.push(marker_20);markers_not_owned.push(marker_20);cat_1_markers.push(marker_21);markers_not_owned.push(marker_21);cat_1_markers.push(marker_22);markers_not_owned.push(marker_22);}
var new_markers=new Array();var newMarker;function createMarker(markerOptions,_new){var marker=new google.maps.Marker(markerOptions);markers.push(marker);lat_longs.push(marker.getPosition());if(_new){newMarker=marker;var newMarkersAmount=new_markers.length;for(var i=0;i<newMarkersAmount;i++){_newMarker=new_markers.pop();_newMarker.setMap(null);}
var lat=marker.getPosition().lat();var long=marker.getPosition().lng();newIW=new google.maps.InfoWindow({content:"<div class=\"iw_new_loading_box\"><img src=\"http://www.frofens.org/xumb/demo/icons/ajax-loader.gif\"></div>"});newIW.open(map,marker);newmarker_infowindow_content(lat,long,newIW);new_markers.push(marker);google.maps.event.addListenerOnce(newIW,"closeclick",function(){marker.setMap(null);});}
return marker;}
this.onload=function(){
		initialize();
        if (navigator.geolocation) {
             navigator.geolocation.getCurrentPosition(updateMapPosition, geoLocError);
        }
}
			</script><div id="map_canvas" style="width:100%; height:80%; margin:0px;"></div>
		
<style type="text/css">
#mapFooter {
	height: 30px;
	margin: 5px;
}

#dblClick-categ {
	float: left; font-size: small; width: 33%; vertical-align: middle;
}

#mrkShown-categ {
	float: left; font-size: small; width: 33%; vertical-align: middle;
}

#tglCategs {
	float: left; text-align: right; font-size: small; width: 33%; vertical-align: middle;
}

#dblClick-nocateg {
	float: left; text-align: center; font-size: small; width: 50%; vertical-align: middle;
}

#mrkShown-nocateg {
	float: left; text-align: center; font-size: small; width: 50%; vertical-align: middle;
}
</style>
	<div id="mapFooter">
		<div id="dblClick-categ">
			Double-click to add a Marker<br>(you must be logged in for that)
		</div>
		<div id="mrkShown-categ">
			Markers shown: <span id="markersShown" style="display: inline-block; width: 50px;">All</span> <input style="font-size: small;" type="button" value="Toggle" onClick="toggleMarkers();">
		</div>
		<div id="tglCategs">
		<input type=checkbox checked=checked name=cat1 value=1 onClick='showHideMarkers(cat_1_markers, this);'><img src='http://www.frofens.org/xumb/demo/icons/construction.png'> <input type=checkbox checked=checked name=cat2 value=2 onClick='showHideMarkers(cat_2_markers, this);'><img src='http://www.frofens.org/xumb/demo/icons/car.png'> <input type=checkbox checked=checked name=cat3 value=3 onClick='showHideMarkers(cat_3_markers, this);'><img src='http://www.frofens.org/xumb/demo/icons/power.png'> <input type=checkbox checked=checked name=cat4 value=4 onClick='showHideMarkers(cat_4_markers, this);'><img src='http://www.frofens.org/xumb/demo/icons/tree.png'> 		</div>
	</div>
<script type="application/javascript">
	function showHideMarkers(markers, checkbox) {
		for(var i=0; i<markers.length; i++) {
			marker = markers[i];
			marker.setVisible( checkbox.checked );
		}
	}

	var label = document.getElementById('markersShown'); 
	var markersShown = 'all';

	function toggleMarkers() {
		switch( markersShown ) {
			case 'all':
				for(var i=0; i<markers_not_owned.length; i++) {
					markers_not_owned[i].setVisible( false );
				}
				markersShown = 'user';
				label.innerHTML = 'User'; // TODO lang
				break;

			case 'user':
				for(var i=0; i<markers_not_owned.length; i++) {
					markers_not_owned[i].setVisible( true );
				}
				for(var i=0; i<markers_owned.length; i++) {
					markers_owned[i].setVisible( false );
				}
				label.innerHTML = 'Others';
				markersShown = 'others';
				break;

			case 'others':
				for(var i=0; i<markers_owned.length; i++) {
					markers_owned[i].setVisible( true );
				}
				label.innerHTML = 'All';
				markersShown = 'all';
				break;
		}
	}
</script>	</div> <!-- align center -->
</body>
</html>
